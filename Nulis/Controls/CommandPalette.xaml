<?xml version="1.0" encoding="utf-8"?>
<ContentDialog
    x:Class="Nulis.Controls.CommandPalette"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Nulis.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    PrimaryButtonText=""
    CloseButtonText=""
    DefaultButton="Close"
    CornerRadius="12">

    <ContentDialog.Style>
        <Style TargetType="ContentDialog">
            <Setter Property="VerticalAlignment" Value="Top"/>
            <Setter Property="VerticalContentAlignment" Value="Top"/>
            <Setter Property="Margin" Value="0,50,0,0"/>
            <Setter Property="CornerRadius" Value="12"/>
        </Style>
    </ContentDialog.Style>

    <Grid Width="700" MinHeight="500">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Search Box -->
        <TextBox x:Name="SearchBox"
                 Grid.Row="0"
                 PlaceholderText="Type a command or search..."
                 FontSize="14"
                 Padding="12,10"
                 Margin="0,0,0,8"
                 CornerRadius="6"
                 BorderThickness="1"
                 TextChanged="SearchBox_TextChanged"
                 KeyDown="SearchBox_KeyDown"/>

        <!-- Commands List -->
        <ScrollViewer Grid.Row="1"
                      MaxHeight="500"
                      Padding="0,0,0,8"
                      VerticalScrollBarVisibility="Auto">
            <ItemsControl x:Name="CommandsItemsControl">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Button HorizontalAlignment="Stretch"
                                HorizontalContentAlignment="Stretch"
                                Padding="12,10"
                                Margin="0,0,0,2"
                                Click="CommandButton_Click"
                                Tag="{Binding}"
                                CornerRadius="6"
                                BorderThickness="1"
                                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                                BorderBrush="Transparent">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <StackPanel Grid.Column="0" Spacing="3">
                                    <TextBlock Text="{Binding Name}"
                                               FontSize="13"
                                               FontWeight="SemiBold"
                                               Foreground="{ThemeResource TextFillColorPrimaryBrush}"/>
                                    <TextBlock Text="{Binding Description}"
                                               FontSize="11"
                                               Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                               TextWrapping="Wrap"
                                               Visibility="{Binding DescriptionVisibility}"/>
                                </StackPanel>

                                <Border Grid.Column="1"
                                        Background="{ThemeResource SubtleFillColorSecondaryBrush}"
                                        CornerRadius="4"
                                        Padding="8,4"
                                        VerticalAlignment="Center"
                                        Margin="12,0,0,0"
                                        Visibility="{Binding ShortcutVisibility}">
                                    <TextBlock Text="{Binding Shortcut}"
                                               FontSize="11"
                                               FontFamily="Consolas"
                                               Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                </Border>
                            </Grid>
                        </Button>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>

        <!-- No Results Message -->
        <StackPanel x:Name="NoResultsText"
                   Grid.Row="1"
                   HorizontalAlignment="Center"
                   VerticalAlignment="Center"
                   Spacing="8"
                   Visibility="Collapsed">
            <FontIcon Glyph="&#xE11A;" 
                     FontSize="32"
                     Foreground="{ThemeResource TextFillColorTertiaryBrush}"/>
            <TextBlock Text="No commands found"
                       FontSize="14"
                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
        </StackPanel>
    </Grid>
</ContentDialog>
